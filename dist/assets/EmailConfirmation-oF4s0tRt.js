import{a as h,r as d,k as w,H as k,A as _,b as a,f as e,g as C,e as p,z as u,t as m,o as l}from"./vue-B0LylYIL.js";import{s as x}from"./index-Dhaj8LKV.js";import"./supabase-DqT9qdmq.js";const j={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-yellow-50 via-white to-orange-50 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden"},z={class:"max-w-md w-full space-y-8 relative z-10"},B={class:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/50 p-8 transition-all duration-300 hover:shadow-2xl"},M={class:"text-center space-y-6"},V={class:"space-y-4"},E={class:"text-gray-600"},A={class:"font-medium text-blue-600"},H={class:"space-y-4"},N=["disabled"],S={key:0,class:"flex items-center justify-center"},q={key:1,class:"flex items-center justify-center"},L={key:0,class:"p-3 bg-blue-50 border border-blue-200 rounded-xl text-blue-600 text-sm"},R={key:1,class:"p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm"},F=h({__name:"EmailConfirmation",setup(T){const f=_(),c=k(),n=d(""),i=d(!1),s=d(""),r=d("");w(()=>{n.value=c.query.email||localStorage.getItem("pending_email")||"",c.query.token&&y(c.query.token)});async function v(){if(!n.value){r.value="邮箱地址不可用";return}i.value=!0,r.value="",s.value="";try{const{error:o}=await x.auth.resend({type:"signup",email:n.value});if(o)throw o;s.value="确认邮件已重新发送，请检查您的邮箱"}catch(o){r.value=o.message||"发送失败，请稍后重试"}finally{i.value=!1}}async function y(o){try{const{data:t,error:g}=await x.auth.verifyOtp({token_hash:o,type:"signup"});if(g)throw g;s.value="邮箱验证成功！您现在可以登录了。",localStorage.removeItem("pending_email"),setTimeout(()=>{f.push("/login")},3e3)}catch(t){r.value=t.message||"邮箱验证失败，请重试"}}function b(){f.push("/login")}return(o,t)=>(l(),a("div",j,[t[9]||(t[9]=e("div",{class:"absolute inset-0 overflow-hidden"},[e("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-r from-yellow-200 to-orange-200 rounded-full opacity-20 blur-3xl"}),e("div",{class:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-r from-orange-200 to-red-200 rounded-full opacity-20 blur-3xl"}),e("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-yellow-100 to-orange-100 rounded-full opacity-10 blur-3xl"})],-1)),e("div",z,[t[7]||(t[7]=C('<div class="text-center"><div class="mx-auto w-16 h-16 bg-gradient-to-r from-yellow-600 to-orange-600 rounded-2xl flex items-center justify-center mb-6 shadow-lg"><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div><h2 class="text-3xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent"> 邮箱确认 </h2><p class="mt-3 text-gray-600"> 请检查您的邮箱并完成验证 </p></div>',1)),e("div",B,[e("div",M,[t[6]||(t[6]=e("div",{class:"mx-auto w-20 h-20 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})])],-1)),e("div",V,[t[2]||(t[2]=e("h3",{class:"text-xl font-semibold text-gray-900"}," 注册成功！ ",-1)),e("p",E,[t[0]||(t[0]=u(" 我们已经向 ",-1)),e("span",A,m(n.value),1),t[1]||(t[1]=u(" 发送了确认邮件。 ",-1))]),t[3]||(t[3]=e("p",{class:"text-sm text-gray-500"}," 请点击邮件中的链接来验证您的邮箱地址。 ",-1))]),e("div",H,[e("button",{onClick:v,disabled:i.value,class:"w-full py-3 px-4 bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-medium rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[i.value?(l(),a("span",q,[...t[5]||(t[5]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" 发送中... ",-1)])])):(l(),a("span",S,[...t[4]||(t[4]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),u(" 重新发送确认邮件 ",-1)])]))],8,N),e("button",{onClick:b,class:"w-full py-3 px-4 border border-gray-300 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-all duration-200"}," 返回登录 ")]),s.value?(l(),a("div",L,m(s.value),1)):p("",!0),r.value?(l(),a("div",R,m(r.value),1)):p("",!0)])]),t[8]||(t[8]=e("div",{class:"text-center text-sm text-gray-500"},[e("p",null,"没有收到邮件？请检查垃圾邮件文件夹或联系支持。")],-1))])]))}});export{F as default};
