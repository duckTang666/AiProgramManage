const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DAXvTnSp.js","assets/vue-CUAfhYnW.js","assets/supabase-DiqIXwZt.js","assets/index-BT7Lh3aE.css"])))=>i.map(i=>d[i]);
import{u as Ce,a as je,b as Me,s as j,T as te,c as ze,_ as Se}from"./index-DAXvTnSp.js";import{a as De,r as d,C as se,c as oe,k as Te,b as l,f as t,e as p,l as Ue,y as Ve,p as Pe,t as i,w as f,v as k,D as $,g as le,F as T,h as U,z as q,E as Z,G as Le,i as $e,A as Ee,o as a,n as ae}from"./vue-CUAfhYnW.js";import"./supabase-DiqIXwZt.js";const Be={class:"min-h-screen bg-gray-50"},Ie={class:"bg-white shadow-sm border-b border-gray-200"},Ae={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Oe={class:"flex justify-between h-16"},Re={class:"flex items-center space-x-8"},Fe={class:"flex items-center space-x-4"},qe={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},Ne={class:"mb-8"},He={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ge={class:"card p-6 text-center"},Ke={class:"text-3xl font-bold text-blue-600 mb-2"},Ze={class:"card p-6 text-center"},Qe={class:"text-3xl font-bold text-green-600 mb-2"},We={class:"card p-6 text-center"},Je={class:"text-3xl font-bold text-orange-600 mb-2"},Xe={class:"mb-8"},Ye={class:"flex justify-between items-center mb-4"},et={class:"text-sm text-gray-600"},tt={class:"mb-6"},st={class:"flex flex-col md:flex-row gap-4"},ot={class:"flex-1"},lt={class:"relative"},at={class:"w-full md:w-48"},rt={class:"w-full md:w-48"},nt={key:0,class:"flex flex-wrap gap-2 mt-3"},it={class:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm"},dt={key:0,class:"mr-2"},ut={key:1,class:"mr-2"},ct={key:0,class:"text-center py-8"},vt={key:1,class:"card p-8 text-center"},mt={class:"mt-6"},pt={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},gt={class:"flex justify-between items-start mb-3"},ft=["onClick"],xt={class:"flex items-center space-x-1"},bt=["onClick"],yt=["onClick"],wt={class:"flex justify-between items-center text-xs text-gray-500"},ht={key:3,class:"card p-8 text-center"},_t={class:"mt-1 text-sm text-gray-500"},kt={key:0},Ct={key:1},jt={class:"mb-8"},Mt={key:0,class:"card p-6 text-center text-gray-500"},zt={key:1,class:"space-y-3"},St={class:"flex justify-between items-start"},Dt={class:"font-medium text-gray-900"},Tt={class:"flex justify-between items-center mt-2 text-xs text-gray-500"},Ut={key:0},Vt={class:"card p-6"},Pt={class:"space-y-3"},Lt={class:"text-sm text-blue-700"},$t={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Et={class:"bg-white rounded-lg max-w-md w-full p-6"},Bt={class:"space-y-4"},It=["value"],At={key:0,class:"text-red-600 text-sm mt-2"},Ot={class:"flex justify-end space-x-3 mt-6"},Rt=["disabled"],Ft={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},qt={class:"bg-white rounded-lg max-w-md w-full p-6"},Nt={class:"space-y-4"},Ht=["value"],Gt={key:0,class:"text-red-600 text-sm mt-2"},Kt={class:"flex justify-end space-x-3 mt-6"},Zt=["disabled"],Qt={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Wt={class:"bg-white rounded-lg max-w-md w-full p-6"},Jt={class:"text-gray-600 mb-6"},Xt={class:"font-semibold text-gray-900"},Yt={key:0,class:"text-red-600 text-sm mb-4 p-3 bg-red-50 rounded-lg"},es={class:"flex justify-end space-x-3"},ts=["disabled"],ss=["disabled"],os={key:3,class:"fixed bottom-6 right-6 z-50 w-96 h-96 bg-white rounded-lg shadow-xl border border-gray-200 flex flex-col"},ls={class:"flex-1 p-4 overflow-y-auto bg-gray-50"},as={key:0,class:"flex items-start space-x-2"},rs={class:"bg-white p-3 rounded-lg shadow-sm border border-gray-200 max-w-xs"},ns={class:"text-sm text-gray-800"},is={key:1,class:"flex items-start space-x-2 justify-end"},ds={class:"bg-blue-100 p-3 rounded-lg shadow-sm border border-blue-200 max-w-xs"},us={class:"text-sm text-blue-800"},cs={class:"p-4 border-t border-gray-200"},vs={class:"flex space-x-2"},ms=["disabled"],ps=5*60*1e3,gs=De({__name:"ProjectManagement",setup(fs){const re=Ee(),C=Ce(),V=je(),E=Me(),r=d([]),x=d([]),N=d(!1),b=d(""),y=d(""),B=d("created_at-desc"),ne=d([{text:"å»ºè®®ä¼˜å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§ä»»åŠ¡"},{text:"æœ¬å‘¨é¡¹ç›®è¿›åº¦è‰¯å¥½ï¼Œç»§ç»­ä¿æŒ"},{text:"å¯ä»¥è€ƒè™‘å¢åŠ å›¢é˜Ÿåä½œåŠŸèƒ½"}]),P=d(!1),I=d(!1),w=d(""),v=se({name:"",description:"",organization_id:""}),H=d(!1),G=d([{text:"ä½ å¥½ï¼æˆ‘æ˜¯AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ",isUser:!1}]),M=d(""),A=d(!1),O=d(!1),h=d(""),n=se({project_id:"",title:"",description:"",priority:"medium",due_date:"",estimated_hours:""}),R=d(!1),z=d(!1),_=d(null),S=d("");async function ie(){try{await C.logout(),re.push("/login")}catch(o){console.error("Logout error:",o)}}async function de(){if(!v.name.trim()){w.value="è¯·è¾“å…¥é¡¹ç›®åç§°";return}if(!v.organization_id){w.value="è¯·é€‰æ‹©ç»„ç»‡";return}I.value=!0,w.value="";try{const o=await Q();if(!o)throw new Error("ç”¨æˆ·è®°å½•ä¸å­˜åœ¨ï¼Œè¯·å…ˆå®Œå–„ç”¨æˆ·ä¿¡æ¯");const e={id:Date.now(),name:v.name,description:v.description,organization_id:parseInt(v.organization_id),owner_id:o.id,status:"active",priority:"medium",progress_percentage:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};r.value.unshift(e);const c=await E.createProject({name:v.name.trim(),description:v.description?.trim()||"",organization_id:parseInt(v.organization_id),owner_id:o.id}),s=r.value.findIndex(m=>m.id===e.id);s!==-1&&(r.value[s]=c),P.value=!1,ue(),console.log("âœ… é¡¹ç›®åˆ›å»ºæˆåŠŸ")}catch(o){console.error("åˆ›å»ºé¡¹ç›®å¤±è´¥:",o),ce(),o.message.includes("é¡¹ç›®åç§°å·²å­˜åœ¨")?w.value="é¡¹ç›®åç§°å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–åç§°":o.message.includes("æƒé™ä¸è¶³")?w.value="æƒé™ä¸è¶³ï¼Œæ— æ³•åˆ›å»ºé¡¹ç›®":o.message.includes("æŒ‡å®šçš„ç»„ç»‡æˆ–è´Ÿè´£äººä¸å­˜åœ¨")?w.value="æŒ‡å®šçš„ç»„ç»‡æˆ–è´Ÿè´£äººä¸å­˜åœ¨":w.value=o.message||"åˆ›å»ºé¡¹ç›®å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–æ•°æ®åº“çŠ¶æ€"}finally{I.value=!1}}let D=null,L=0;async function Q(){const o=C.user?.email;if(!o)throw new Error("ç”¨æˆ·æœªç™»å½•");const e=Date.now();if(D&&e-L<ps)return console.log("ğŸ“¦ ä½¿ç”¨ç¼“å­˜çš„ç”¨æˆ·è®°å½•"),D;try{const{data:c,error:s}=await j.from("users").select("*").eq("email",o).single();if(s){if(console.error("æŸ¥è¯¢ç”¨æˆ·è®°å½•å¤±è´¥:",s),s.code==="PGRST116"){console.log("ç”¨æˆ·è®°å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºé»˜è®¤ç”¨æˆ·è®°å½•");const{data:m,error:u}=await j.from("users").insert([{email:o,display_name:C.user?.user_metadata?.name||o.split("@")[0]||"ç”¨æˆ·",role:"member",is_active:!0}]).select().single();if(u){console.error("åˆ›å»ºç”¨æˆ·è®°å½•å¤±è´¥:",u);const g={id:Date.now(),email:o,display_name:C.user?.user_metadata?.name||o.split("@")[0]||"ç”¨æˆ·",role:"member",is_active:!0};return D=g,L=e,g}return D=m,L=e,m}throw s}return D=c,L=e,c}catch(c){console.error("è·å–ç”¨æˆ·è®°å½•å¤±è´¥:",c);const s={id:Date.now(),email:o,display_name:C.user?.user_metadata?.name||o.split("@")[0]||"ç”¨æˆ·",role:"member",is_active:!0};return D=s,L=e,s}}function ue(){v.name="",v.description="",v.organization_id=""}function ce(){r.value.length>0&&(r.value=r.value.filter(o=>!o.id||o.id>1e3))}const ve=()=>{H.value=!0},me=()=>{H.value=!1},W=()=>{M.value.trim()!==""&&(G.value.push({text:M.value,isUser:!0}),setTimeout(()=>{G.value.push({text:"æ”¶åˆ°ä½ çš„æ¶ˆæ¯ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ä½ ã€‚",isUser:!1})},1e3),M.value="")},pe=()=>{A.value=!0};async function ge(){if(!n.project_id){h.value="è¯·é€‰æ‹©é¡¹ç›®";return}if(!n.title.trim()){h.value="è¯·è¾“å…¥ä»»åŠ¡æ ‡é¢˜";return}O.value=!0,h.value="";try{const{UserService:o}=await ze(async()=>{const{UserService:u}=await import("./index-DAXvTnSp.js").then(g=>g.e);return{UserService:u}},__vite__mapDeps([0,1,2,3]));let e=125;const c=C.user?.email;if(c)try{const u=await o.getUserByEmail(c);u?.id&&(e=u.id)}catch(u){console.warn("é€šè¿‡é‚®ç®±æŸ¥è¯¢ç”¨æˆ·å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤ID 125:",u)}const s={project_id:parseInt(n.project_id),title:n.title.trim(),description:n.description?.trim()||"",priority:n.priority,status:"todo",assignee_id:e,reporter_id:e,due_date:n.due_date||null,estimated_hours:n.estimated_hours?parseFloat(n.estimated_hours):null},m=await te.createTask(s);x.value.unshift(m),A.value=!1,fe(),console.log("âœ… ä»»åŠ¡åˆ›å»ºæˆåŠŸ")}catch(o){console.error("åˆ›å»ºä»»åŠ¡å¤±è´¥:",o),o.message.includes("é¡¹ç›®ä¸å­˜åœ¨")?h.value="æŒ‡å®šçš„é¡¹ç›®ä¸å­˜åœ¨":o.message.includes("æƒé™ä¸è¶³")?h.value="æƒé™ä¸è¶³ï¼Œæ— æ³•åˆ›å»ºä»»åŠ¡":h.value=o.message||"åˆ›å»ºä»»åŠ¡å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–æ•°æ®åº“çŠ¶æ€"}finally{O.value=!1}}function fe(){n.project_id="",n.title="",n.description="",n.priority="medium",n.due_date="",n.estimated_hours=""}function xe(o){_.value=o,R.value=!0,S.value=""}function be(){R.value=!1,_.value=null,S.value="",z.value=!1}async function ye(){if(_.value){z.value=!0,S.value="";try{await we(_.value.id);const{error:o}=await j.from("projects").delete().eq("id",_.value.id);if(o)throw new Error(`åˆ é™¤é¡¹ç›®å¤±è´¥: ${o.message}`);r.value=r.value.filter(e=>e.id!==_.value.id),R.value=!1,_.value=null,console.log("âœ… é¡¹ç›®åˆ é™¤æˆåŠŸ")}catch(o){console.error("åˆ é™¤é¡¹ç›®å¤±è´¥:",o),S.value=o.message||"åˆ é™¤é¡¹ç›®å¤±è´¥ï¼Œè¯·é‡è¯•"}finally{z.value=!1}}}async function we(o){try{const{error:e}=await j.from("tasks").delete().eq("project_id",o);e&&console.warn("åˆ é™¤é¡¹ç›®ä»»åŠ¡å¤±è´¥:",e)}catch(e){console.warn("åˆ é™¤é¡¹ç›®ä»»åŠ¡æ—¶å‡ºç°å¼‚å¸¸:",e)}}async function he(){N.value=!0;try{if(console.log("ğŸš€ å¼€å§‹åŠ è½½é¡¹ç›®æ•°æ®..."),!C.user?.id){console.warn("ç”¨æˆ·æœªç™»å½•ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ"),await F();return}const o=await Q();if(!o||!o.id){console.warn("ç”¨æˆ·è®°å½•è·å–å¤±è´¥ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆåŠ è½½é¡¹ç›®"),await F();return}console.log("âœ… ç”¨æˆ·è®°å½•è·å–æˆåŠŸ:",o.id);try{console.log("ğŸ” å°è¯•ç›´æ¥åŠ è½½æ‰€æœ‰é¡¹ç›®...");const{data:e,error:c}=await j.from("projects").select("*").order("created_at",{ascending:!1});c?(console.warn("ç›´æ¥åŠ è½½é¡¹ç›®å¤±è´¥ï¼Œå°è¯•ç»„ç»‡å…³è”æ–¹å¼:",c.message),await J(o.id)):(r.value=e||[],console.log(`âœ… ç›´æ¥åŠ è½½é¡¹ç›®æˆåŠŸ: ${r.value.length} ä¸ªé¡¹ç›®`))}catch(e){console.warn("ç›´æ¥åŠ è½½é¡¹ç›®å¼‚å¸¸ï¼Œå°è¯•ç»„ç»‡å…³è”æ–¹å¼:",e),await J(o.id)}if(r.value.length===0){console.log("é¡¹ç›®ä¸ºç©ºï¼Œå°è¯•é™çº§æ–¹æ¡ˆ..."),await F();return}r.value.length>0&&await _e(),console.log(`ğŸ‰ é¡¹ç›®æ•°æ®åŠ è½½å®Œæˆ: ${r.value.length} ä¸ªé¡¹ç›®`)}catch(o){console.error("åŠ è½½é¡¹ç›®æ•°æ®å¤±è´¥:",o),await F()}finally{N.value=!1}}async function J(o){try{if(console.log("ğŸ” é€šè¿‡ç»„ç»‡å…³è”åŠ è½½é¡¹ç›®..."),await V.fetchOrganizations(o),console.log(`ğŸ“Š ç”¨æˆ·ç»„ç»‡æ•°é‡: ${V.organizations.length}`),r.value=[],V.organizations.length>0)for(const e of V.organizations)try{await E.fetchProjects(e.id),r.value.push(...E.projects),console.log(`âœ… åŠ è½½ç»„ç»‡ ${e.id} çš„é¡¹ç›®: ${E.projects.length} ä¸ª`)}catch(c){console.warn(`åŠ è½½ç»„ç»‡ ${e.id} çš„é¡¹ç›®å¤±è´¥:`,c)}}catch(e){throw console.error("é€šè¿‡ç»„ç»‡å…³è”åŠ è½½é¡¹ç›®å¤±è´¥:",e),e}}async function F(){try{console.log("ğŸ”§ ä½¿ç”¨é™çº§æ–¹æ¡ˆåŠ è½½é¡¹ç›®...");const{data:o,error:e}=await j.from("projects").select("*").order("created_at",{ascending:!1});e?(console.error("é™çº§æ–¹æ¡ˆåŠ è½½é¡¹ç›®å¤±è´¥:",e),e.message?.includes("does not exist")?(console.log("é¡¹ç›®è¡¨ä¸å­˜åœ¨ï¼Œä½¿ç”¨ç¤ºä¾‹æ•°æ®"),r.value=[{id:1,name:"ç¤ºä¾‹é¡¹ç›®",description:"è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®ï¼Œç”¨äºæ¼”ç¤ºå¹³å°åŠŸèƒ½",status:"active",priority:"medium",progress_percentage:75,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]):r.value=[]):r.value=o||[],r.value.length>0&&await X(),console.log(`ğŸ”§ é™çº§æ–¹æ¡ˆåŠ è½½å®Œæˆ: ${r.value.length} ä¸ªé¡¹ç›®`)}catch(o){console.error("é™çº§æ–¹æ¡ˆä¹Ÿå¤±è´¥äº†:",o),r.value=[],x.value=[]}}async function _e(){try{x.value=[];for(const o of r.value){const e=await te.getTasksByProject(o.id);x.value.push(...e)}}catch(o){console.error("åŠ è½½ä»»åŠ¡æ•°æ®å¤±è´¥:",o),await X()}}async function X(){try{console.log("ğŸ”§ ä½¿ç”¨é™çº§æ–¹æ¡ˆåŠ è½½ä»»åŠ¡...");const{data:o,error:e}=await j.from("tasks").select("*").order("created_at",{ascending:!1}).limit(10);e?(console.error("é™çº§æ–¹æ¡ˆåŠ è½½ä»»åŠ¡å¤±è´¥:",e),e.message?.includes("does not exist")?(console.log("ä»»åŠ¡è¡¨ä¸å­˜åœ¨ï¼Œä½¿ç”¨ç¤ºä¾‹æ•°æ®"),x.value=[{id:1,title:"é¡¹ç›®åˆå§‹åŒ–",description:"å®Œæˆé¡¹ç›®åŸºç¡€è®¾ç½®å’Œé…ç½®",status:"done",project_id:1,created_at:new Date().toISOString()},{id:2,title:"ç”¨æˆ·ç•Œé¢è®¾è®¡",description:"è®¾è®¡é¡¹ç›®çš„ä¸»è¦ç”¨æˆ·ç•Œé¢",status:"in_progress",project_id:1,created_at:new Date().toISOString()}]):x.value=[]):x.value=o||[],console.log(`ğŸ”§ é™çº§æ–¹æ¡ˆåŠ è½½ä»»åŠ¡å®Œæˆ: ${x.value.length} ä¸ªä»»åŠ¡`)}catch(o){console.error("é™çº§æ–¹æ¡ˆåŠ è½½ä»»åŠ¡ä¹Ÿå¤±è´¥äº†:",o),x.value=[]}}const K=oe(()=>{let o=r.value;if(b.value.trim()){const s=b.value.toLowerCase();o=o.filter(m=>m.name?.toLowerCase().includes(s)||m.description?.toLowerCase().includes(s))}y.value&&(o=o.filter(s=>s.status===y.value));const[e,c]=B.value.split("-");return o.sort((s,m)=>{let u=s[e],g=m[e];return e==="name"&&(u=u?.toLowerCase()||"",g=g?.toLowerCase()||""),e==="progress"&&(u=s.progress_percentage||0,g=m.progress_percentage||0),e==="created_at"&&(u=new Date(u||s.created_at),g=new Date(g||m.created_at)),c==="asc"?u<g?-1:u>g?1:0:u>g?-1:u<g?1:0}),o}),Y=oe(()=>b.value.trim()!==""||y.value!=="");function ke(o){return{active:"è¿›è¡Œä¸­",completed:"å·²å®Œæˆ",planning:"è§„åˆ’ä¸­"}[o]||o}function ee(){b.value="",y.value="",B.value="created_at-desc"}return Te(async()=>{await he()}),(o,e)=>{const c=Pe("RouterLink");return a(),l("div",Be,[t("nav",Ie,[t("div",Ae,[t("div",Oe,[t("div",Re,[Ue(c,{to:"/",class:"text-gray-600 hover:text-gray-900"},{default:Ve(()=>[...e[18]||(e[18]=[q(" â† è¿”å›å·¥ä½œå° ",-1)])]),_:1}),e[19]||(e[19]=t("h1",{class:"text-xl font-semibold text-gray-900"},"é¡¹ç›®ç®¡ç†",-1))]),t("div",Fe,[t("button",{onClick:e[0]||(e[0]=s=>P.value=!0),class:"btn btn-primary"}," åˆ›å»ºæ–°é¡¹ç›® "),t("button",{onClick:ie,class:"btn btn-outline text-sm"}," é€€å‡ºç™»å½• ")])])])]),t("main",qe,[t("div",Ne,[e[23]||(e[23]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-4"},"é¡¹ç›®æ¦‚è§ˆ",-1)),t("div",He,[t("div",Ge,[t("div",Ke,i(r.value.length),1),e[20]||(e[20]=t("div",{class:"text-sm text-gray-600"},"æ€»é¡¹ç›®æ•°",-1))]),t("div",Ze,[t("div",Qe,i(r.value.filter(s=>s.status==="active").length),1),e[21]||(e[21]=t("div",{class:"text-sm text-gray-600"},"è¿›è¡Œä¸­",-1))]),t("div",We,[t("div",Je,i(x.value.filter(s=>s.status==="todo"||s.status==="in_progress").length),1),e[22]||(e[22]=t("div",{class:"text-sm text-gray-600"},"å¾…åŠä»»åŠ¡",-1))])])]),t("div",Xe,[t("div",Ye,[e[24]||(e[24]=t("h2",{class:"text-xl font-semibold text-gray-900"},"é¡¹ç›®åˆ—è¡¨",-1)),t("div",et," å…± "+i(K.value.length)+" ä¸ªé¡¹ç›® ",1)]),t("div",tt,[t("div",st,[t("div",ot,[t("div",lt,[f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>b.value=s),type:"text",placeholder:"æœç´¢é¡¹ç›®åç§°æˆ–æè¿°...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[k,b.value]]),e[26]||(e[26]=t("div",{class:"absolute left-3 top-1/2 transform -translate-y-1/2"},[t("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),b.value?(a(),l("button",{key:0,onClick:e[2]||(e[2]=s=>b.value=""),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},[...e[25]||(e[25]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):p("",!0)])]),t("div",at,[f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>y.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...e[27]||(e[27]=[t("option",{value:""},"æ‰€æœ‰çŠ¶æ€",-1),t("option",{value:"active"},"è¿›è¡Œä¸­",-1),t("option",{value:"completed"},"å·²å®Œæˆ",-1),t("option",{value:"planning"},"è§„åˆ’ä¸­",-1)])],512),[[$,y.value]])]),t("div",rt,[f(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>B.value=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...e[28]||(e[28]=[le('<option value="created_at-desc" data-v-a6d5a426>æœ€æ–°åˆ›å»º</option><option value="created_at-asc" data-v-a6d5a426>æœ€æ—©åˆ›å»º</option><option value="name-asc" data-v-a6d5a426>åç§° A-Z</option><option value="name-desc" data-v-a6d5a426>åç§° Z-A</option><option value="progress-asc" data-v-a6d5a426>è¿›åº¦ä½åˆ°é«˜</option><option value="progress-desc" data-v-a6d5a426>è¿›åº¦é«˜åˆ°ä½</option>',6)])],512),[[$,B.value]])])]),Y.value?(a(),l("div",nt,[t("div",it,[e[29]||(e[29]=t("span",{class:"mr-2"},"ç­›é€‰æ¡ä»¶:",-1)),b.value?(a(),l("span",dt,'æœç´¢: "'+i(b.value)+'"',1)):p("",!0),y.value?(a(),l("span",ut,"çŠ¶æ€: "+i(ke(y.value)),1)):p("",!0),t("button",{onClick:ee,class:"ml-1 text-blue-600 hover:text-blue-800"}," æ¸…é™¤ ")])])):p("",!0)]),N.value?(a(),l("div",ct,[...e[30]||(e[30]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),t("p",{class:"mt-2 text-sm text-gray-600"},"åŠ è½½ä¸­...",-1)])])):r.value.length===0?(a(),l("div",vt,[e[31]||(e[31]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e[32]||(e[32]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"æš‚æ— é¡¹ç›®",-1)),e[33]||(e[33]=t("p",{class:"mt-1 text-sm text-gray-500"},"åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªé¡¹ç›®å¼€å§‹ç®¡ç†ä»»åŠ¡",-1)),t("div",mt,[t("button",{onClick:e[5]||(e[5]=s=>P.value=!0),class:"btn btn-primary"}," åˆ›å»ºé¡¹ç›® ")])])):K.value.length>0?(a(),l("div",pt,[(a(!0),l(T,null,U(K.value,s=>(a(),l("div",{key:s.id,class:"card p-6 hover:shadow-md transition-shadow"},[t("div",gt,[t("h3",{class:"text-lg font-semibold text-gray-900 cursor-pointer",onClick:m=>o.$router.push(`/projects/${s.id}`)},i(s.name),9,ft),t("div",xt,[t("span",{class:ae(["px-2 py-1 rounded-full text-xs font-medium",s.status==="active"?"bg-green-100 text-green-800":s.status==="completed"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"])},i(s.status==="active"?"è¿›è¡Œä¸­":s.status==="completed"?"å·²å®Œæˆ":"è§„åˆ’ä¸­"),3),t("button",{onClick:Z(m=>xe(s),["stop"]),class:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"åˆ é™¤é¡¹ç›®"},[...e[34]||(e[34]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,bt)])]),t("p",{class:"text-sm text-gray-600 mb-4 cursor-pointer",onClick:m=>o.$router.push(`/projects/${s.id}`)},i(s.description||"æš‚æ— æè¿°"),9,yt),t("div",wt,[t("span",null,"è¿›åº¦: "+i(s.progress_percentage||0)+"%",1),t("span",null,i(new Date(s.created_at).toLocaleDateString("zh-CN")),1)])]))),128))])):Y.value&&r.value.length>0?(a(),l("div",ht,[e[36]||(e[36]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),e[37]||(e[37]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"æœªæ‰¾åˆ°åŒ¹é…çš„é¡¹ç›®",-1)),t("p",_t,[e[35]||(e[35]=q(" å½“å‰ç­›é€‰æ¡ä»¶æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„é¡¹ç›® ",-1)),b.value?(a(),l("span",kt,"ï¼Œè¯·å°è¯•ä¿®æ”¹æœç´¢å…³é”®è¯")):p("",!0),y.value?(a(),l("span",Ct,"æˆ–è°ƒæ•´çŠ¶æ€ç­›é€‰")):p("",!0)]),t("div",{class:"mt-6"},[t("button",{onClick:ee,class:"btn btn-primary"}," æ¸…é™¤ç­›é€‰æ¡ä»¶ ")])])):p("",!0)]),t("div",jt,[t("div",{class:"flex justify-between items-center mb-4"},[e[38]||(e[38]=t("h2",{class:"text-xl font-semibold text-gray-900"},"æœ€è¿‘ä»»åŠ¡",-1)),t("button",{onClick:pe,class:"btn btn-outline text-sm"}," åˆ›å»ºä»»åŠ¡ ")]),x.value.length===0?(a(),l("div",Mt,[...e[39]||(e[39]=[t("p",null,"æš‚æ— ä»»åŠ¡æ•°æ®",-1)])])):(a(),l("div",zt,[(a(!0),l(T,null,U(x.value.slice(0,5),s=>(a(),l("div",{key:s.id,class:"card p-4 hover:shadow-md transition-shadow"},[t("div",St,[t("h4",Dt,i(s.title),1),t("span",{class:ae(["px-2 py-1 rounded-full text-xs font-medium",s.status==="completed"?"bg-green-100 text-green-800":s.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"])},i(s.status==="completed"?"å·²å®Œæˆ":s.status==="in_progress"?"è¿›è¡Œä¸­":"å¾…åŠ"),3)]),t("div",Tt,[t("span",null,"è´Ÿè´£äºº: "+i(s.assignee?.display_name||"æœªåˆ†é…"),1),s.due_date?(a(),l("span",Ut,i(new Date(s.due_date).toLocaleDateString("zh-CN")),1)):p("",!0)])]))),128))]))]),t("div",Vt,[e[40]||(e[40]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"AIå»ºè®®",-1)),t("div",Pt,[(a(!0),l(T,null,U(ne.value,s=>(a(),l("div",{key:s.text,class:"p-3 bg-blue-50 rounded-lg"},[t("p",Lt,i(s.text),1)]))),128))])])]),P.value?(a(),l("div",$t,[t("div",Et,[e[45]||(e[45]=t("h3",{class:"text-lg font-semibold mb-4"},"åˆ›å»ºæ–°é¡¹ç›®",-1)),t("form",{onSubmit:Z(de,["prevent"])},[t("div",Bt,[t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"é¡¹ç›®åç§°",-1)),f(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>v.name=s),type:"text",required:"",class:"input",placeholder:"è¯·è¾“å…¥é¡¹ç›®åç§°"},null,512),[[k,v.name]])]),t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"é¡¹ç›®æè¿°",-1)),f(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=s=>v.description=s),class:"input resize-none",rows:"3",placeholder:"è¯·è¾“å…¥é¡¹ç›®æè¿°ï¼ˆå¯é€‰ï¼‰"},null,512),[[k,v.description]])]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"æ‰€å±ç»„ç»‡",-1)),f(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>v.organization_id=s),required:"",class:"input"},[e[43]||(e[43]=t("option",{value:""},"è¯·é€‰æ‹©ç»„ç»‡",-1)),(a(!0),l(T,null,U(Le(V).organizations,s=>(a(),l("option",{key:s.id,value:s.id},i(s.name),9,It))),128))],512),[[$,v.organization_id]])])]),w.value?(a(),l("div",At,i(w.value),1)):p("",!0),t("div",Ot,[t("button",{type:"button",onClick:e[9]||(e[9]=s=>P.value=!1),class:"btn btn-secondary"}," å–æ¶ˆ "),t("button",{type:"submit",disabled:I.value,class:"btn btn-primary"},i(I.value?"åˆ›å»ºä¸­...":"åˆ›å»º"),9,Rt)])],32)])])):p("",!0),A.value?(a(),l("div",Ft,[t("div",qt,[e[54]||(e[54]=t("h3",{class:"text-lg font-semibold mb-4"},"åˆ›å»ºæ–°ä»»åŠ¡",-1)),t("form",{onSubmit:Z(ge,["prevent"])},[t("div",Nt,[t("div",null,[e[47]||(e[47]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"é€‰æ‹©é¡¹ç›®",-1)),f(t("select",{"onUpdate:modelValue":e[10]||(e[10]=s=>n.project_id=s),required:"",class:"input"},[e[46]||(e[46]=t("option",{value:""},"è¯·é€‰æ‹©é¡¹ç›®",-1)),(a(!0),l(T,null,U(r.value,s=>(a(),l("option",{key:s.id,value:s.id},i(s.name),9,Ht))),128))],512),[[$,n.project_id]])]),t("div",null,[e[48]||(e[48]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ä»»åŠ¡æ ‡é¢˜",-1)),f(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>n.title=s),type:"text",required:"",class:"input",placeholder:"è¯·è¾“å…¥ä»»åŠ¡æ ‡é¢˜"},null,512),[[k,n.title]])]),t("div",null,[e[49]||(e[49]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ä»»åŠ¡æè¿°",-1)),f(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=s=>n.description=s),class:"input resize-none",rows:"3",placeholder:"è¯·è¾“å…¥ä»»åŠ¡æè¿°ï¼ˆå¯é€‰ï¼‰"},null,512),[[k,n.description]])]),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ä¼˜å…ˆçº§",-1)),f(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>n.priority=s),class:"input"},[...e[50]||(e[50]=[t("option",{value:"low"},"ä½",-1),t("option",{value:"medium"},"ä¸­",-1),t("option",{value:"high"},"é«˜",-1),t("option",{value:"urgent"},"ç´§æ€¥",-1)])],512),[[$,n.priority]])]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"æˆªæ­¢æ—¥æœŸ",-1)),f(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>n.due_date=s),type:"date",class:"input"},null,512),[[k,n.due_date]])]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"é¢„ä¼°å·¥æ—¶ï¼ˆå°æ—¶ï¼‰",-1)),f(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>n.estimated_hours=s),type:"number",min:"0",class:"input",placeholder:"è¯·è¾“å…¥é¢„ä¼°å·¥æ—¶"},null,512),[[k,n.estimated_hours]])])]),h.value?(a(),l("div",Gt,i(h.value),1)):p("",!0),t("div",Kt,[t("button",{type:"button",onClick:e[16]||(e[16]=s=>A.value=!1),class:"btn btn-secondary"}," å–æ¶ˆ "),t("button",{type:"submit",disabled:O.value,class:"btn btn-primary"},i(O.value?"åˆ›å»ºä¸­...":"åˆ›å»º"),9,Zt)])],32)])])):p("",!0),R.value?(a(),l("div",Qt,[t("div",Wt,[e[57]||(e[57]=le('<div class="flex items-center mb-4" data-v-a6d5a426><div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mr-3" data-v-a6d5a426><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-a6d5a426><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z" data-v-a6d5a426></path></svg></div><h3 class="text-lg font-semibold text-gray-900" data-v-a6d5a426>ç¡®è®¤åˆ é™¤</h3></div>',1)),t("p",Jt,[e[55]||(e[55]=q(" ç¡®å®šè¦åˆ é™¤é¡¹ç›® ",-1)),t("span",Xt,'"'+i(_.value?.name)+'"',1),e[56]||(e[56]=q(" å—ï¼Ÿ æ­¤æ“ä½œå°†åˆ é™¤é¡¹ç›®åŠå…¶æ‰€æœ‰å…³è”ä»»åŠ¡ï¼Œä¸”æ— æ³•æ’¤é”€ã€‚ ",-1))]),S.value?(a(),l("div",Yt,i(S.value),1)):p("",!0),t("div",es,[t("button",{type:"button",onClick:be,disabled:z.value,class:"btn btn-secondary"}," å–æ¶ˆ ",8,ts),t("button",{type:"button",onClick:ye,disabled:z.value,class:"btn btn-danger"},i(z.value?"åˆ é™¤ä¸­...":"ç¡®è®¤åˆ é™¤"),9,ss)])])])):p("",!0),t("div",{class:"fixed bottom-6 right-6 z-50"},[t("button",{onClick:ve,class:"w-14 h-14 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-200 flex items-center justify-center"},[...e[58]||(e[58]=[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)])])]),H.value?(a(),l("div",os,[t("div",{class:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-t-lg flex justify-between items-center"},[e[60]||(e[60]=t("div",{class:"flex items-center"},[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})]),t("span",{class:"font-semibold"},"AIåŠ©æ‰‹")],-1)),t("button",{onClick:me,class:"text-white hover:text-gray-200"},[...e[59]||(e[59]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",ls,[(a(!0),l(T,null,U(G.value,s=>(a(),l("div",{key:s.id,class:"mb-4"},[s.isUser?(a(),l("div",is,[t("div",ds,[t("p",us,i(s.text),1)]),e[62]||(e[62]=t("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1))])):(a(),l("div",as,[e[61]||(e[61]=t("div",{class:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),t("div",rs,[t("p",ns,i(s.text),1)])]))]))),128))]),t("div",cs,[t("div",vs,[f(t("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>M.value=s),onKeyup:$e(W,["enter"]),type:"text",placeholder:"è¾“å…¥æ‚¨çš„é—®é¢˜...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,544),[[k,M.value]]),t("button",{onClick:W,disabled:!M.value.trim(),class:"px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed"}," å‘é€ ",8,ms)])])])):p("",!0)])}}}),ws=Se(gs,[["__scopeId","data-v-a6d5a426"]]);export{ws as default};
