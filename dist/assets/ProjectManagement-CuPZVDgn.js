const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dhaj8LKV.js","assets/vue-B0LylYIL.js","assets/supabase-DqT9qdmq.js","assets/index-DjfOomyX.css"])))=>i.map(i=>d[i]);
import{_ as re}from"./supabase-DqT9qdmq.js";import{a as ne,r as c,C as N,k as ie,b as r,f as t,e as _,l as de,y as ue,p as ce,t as i,F as k,h as j,D as q,w as p,v as y,E as L,G as me,i as pe,A as ve,o as n,z as ge,n as G}from"./vue-B0LylYIL.js";import{u as xe,a as fe,b as be,s as S,T as H,_ as ye}from"./index-Dhaj8LKV.js";const we={class:"min-h-screen bg-gray-50"},he={class:"bg-white shadow-sm border-b border-gray-200"},_e={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ke={class:"flex justify-between h-16"},je={class:"flex items-center space-x-8"},Ce={class:"flex items-center space-x-4"},ze={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},Me={class:"mb-8"},Se={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Te={class:"card p-6 text-center"},Ue={class:"text-3xl font-bold text-blue-600 mb-2"},De={class:"card p-6 text-center"},Ie={class:"text-3xl font-bold text-green-600 mb-2"},Pe={class:"card p-6 text-center"},Ee={class:"text-3xl font-bold text-orange-600 mb-2"},Ve={class:"mb-8"},$e={class:"flex justify-between items-center mb-4"},Be={class:"text-sm text-gray-600"},Le={key:0,class:"text-center py-8"},Oe={key:1,class:"card p-8 text-center"},Re={class:"mt-6"},Ae={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Fe=["onClick"],Ne={class:"flex justify-between items-start mb-3"},qe={class:"text-lg font-semibold text-gray-900"},Ge={class:"text-sm text-gray-600 mb-4"},He={class:"flex justify-between items-center text-xs text-gray-500"},Ke={class:"mb-8"},We={key:0,class:"card p-6 text-center text-gray-500"},Je={key:1,class:"space-y-3"},Qe={class:"flex justify-between items-start"},Xe={class:"font-medium text-gray-900"},Ye={class:"flex justify-between items-center mt-2 text-xs text-gray-500"},Ze={key:0},et={class:"card p-6"},tt={class:"space-y-3"},st={class:"text-sm text-blue-700"},ot={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},lt={class:"bg-white rounded-lg max-w-md w-full p-6"},at={class:"space-y-4"},rt=["value"],nt={key:0,class:"text-red-600 text-sm mt-2"},it={class:"flex justify-end space-x-3 mt-6"},dt=["disabled"],ut={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},ct={class:"bg-white rounded-lg max-w-md w-full p-6"},mt={class:"space-y-4"},pt=["value"],vt={key:0,class:"text-red-600 text-sm mt-2"},gt={class:"flex justify-end space-x-3 mt-6"},xt=["disabled"],ft={key:2,class:"fixed bottom-6 right-6 z-50 w-96 h-96 bg-white rounded-lg shadow-xl border border-gray-200 flex flex-col"},bt={class:"flex-1 p-4 overflow-y-auto bg-gray-50"},yt={key:0,class:"flex items-start space-x-2"},wt={class:"bg-white p-3 rounded-lg shadow-sm border border-gray-200 max-w-xs"},ht={class:"text-sm text-gray-800"},_t={key:1,class:"flex items-start space-x-2 justify-end"},kt={class:"bg-blue-100 p-3 rounded-lg shadow-sm border border-blue-200 max-w-xs"},jt={class:"text-sm text-blue-800"},Ct={class:"p-4 border-t border-gray-200"},zt={class:"flex space-x-2"},Mt=["disabled"],St=5*60*1e3,Tt=ne({__name:"ProjectManagement",setup(Ut){const K=ve(),f=xe(),C=fe(),T=be(),a=c([]),m=c([]),V=c(!1),W=c([{text:"å»ºè®®ä¼˜å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§ä»»åŠ¡"},{text:"æœ¬å‘¨é¡¹ç›®è¿›åº¦è‰¯å¥½ï¼Œç»§ç»­ä¿æŒ"},{text:"å¯ä»¥è€ƒè™‘å¢åŠ å›¢é˜Ÿåä½œåŠŸèƒ½"}]),z=c(!1),U=c(!1),v=c(""),d=N({name:"",description:"",organization_id:""}),$=c(!1),B=c([{text:"ä½ å¥½ï¼æˆ‘æ˜¯AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ",isUser:!1}]),w=c(""),D=c(!1),I=c(!1),x=c(""),l=N({project_id:"",title:"",description:"",priority:"medium",due_date:"",estimated_hours:""});async function J(){try{await f.logout(),K.push("/login")}catch(o){console.error("Logout error:",o)}}async function Q(){if(!d.name.trim()){v.value="è¯·è¾“å…¥é¡¹ç›®åç§°";return}if(!d.organization_id){v.value="è¯·é€‰æ‹©ç»„ç»‡";return}U.value=!0,v.value="";try{const o=await O();if(!o)throw new Error("ç”¨æˆ·è®°å½•ä¸å­˜åœ¨ï¼Œè¯·å…ˆå®Œå–„ç”¨æˆ·ä¿¡æ¯");const e={id:Date.now(),name:d.name,description:d.description,organization_id:parseInt(d.organization_id),owner_id:o.id,status:"active",priority:"medium",progress_percentage:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};a.value.unshift(e);const u=await T.createProject({name:d.name.trim(),description:d.description?.trim()||"",organization_id:parseInt(d.organization_id),owner_id:o.id}),s=a.value.findIndex(b=>b.id===e.id);s!==-1&&(a.value[s]=u),z.value=!1,X(),console.log("âœ… é¡¹ç›®åˆ›å»ºæˆåŠŸ")}catch(o){console.error("åˆ›å»ºé¡¹ç›®å¤±è´¥:",o),Y(),o.message.includes("é¡¹ç›®åç§°å·²å­˜åœ¨")?v.value="é¡¹ç›®åç§°å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–åç§°":o.message.includes("æƒé™ä¸è¶³")?v.value="æƒé™ä¸è¶³ï¼Œæ— æ³•åˆ›å»ºé¡¹ç›®":o.message.includes("æŒ‡å®šçš„ç»„ç»‡æˆ–è´Ÿè´£äººä¸å­˜åœ¨")?v.value="æŒ‡å®šçš„ç»„ç»‡æˆ–è´Ÿè´£äººä¸å­˜åœ¨":v.value=o.message||"åˆ›å»ºé¡¹ç›®å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–æ•°æ®åº“çŠ¶æ€"}finally{U.value=!1}}let h=null,M=0;async function O(){const o=f.user?.email;if(!o)throw new Error("ç”¨æˆ·æœªç™»å½•");const e=Date.now();if(h&&e-M<St)return console.log("ğŸ“¦ ä½¿ç”¨ç¼“å­˜çš„ç”¨æˆ·è®°å½•"),h;try{const{data:u,error:s}=await S.from("users").select("*").eq("email",o).single();if(s){if(console.error("æŸ¥è¯¢ç”¨æˆ·è®°å½•å¤±è´¥:",s),s.code==="PGRST116"){console.log("ç”¨æˆ·è®°å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºé»˜è®¤ç”¨æˆ·è®°å½•");const{data:b,error:g}=await S.from("users").insert([{email:o,display_name:f.user?.user_metadata?.name||o.split("@")[0]||"ç”¨æˆ·",role:"member",is_active:!0}]).select().single();if(g){console.error("åˆ›å»ºç”¨æˆ·è®°å½•å¤±è´¥:",g);const E={id:Date.now(),email:o,display_name:f.user?.user_metadata?.name||o.split("@")[0]||"ç”¨æˆ·",role:"member",is_active:!0};return h=E,M=e,E}return h=b,M=e,b}throw s}return h=u,M=e,u}catch(u){console.error("è·å–ç”¨æˆ·è®°å½•å¤±è´¥:",u);const s={id:Date.now(),email:o,display_name:f.user?.user_metadata?.name||o.split("@")[0]||"ç”¨æˆ·",role:"member",is_active:!0};return h=s,M=e,s}}function X(){d.name="",d.description="",d.organization_id=""}function Y(){a.value.length>0&&(a.value=a.value.filter(o=>!o.id||o.id>1e3))}const Z=()=>{$.value=!0},ee=()=>{$.value=!1},R=()=>{w.value.trim()!==""&&(B.value.push({text:w.value,isUser:!0}),setTimeout(()=>{B.value.push({text:"æ”¶åˆ°ä½ çš„æ¶ˆæ¯ï¼Œæˆ‘ä¼šå°½å¿«å›å¤ä½ ã€‚",isUser:!1})},1e3),w.value="")},te=()=>{D.value=!0};async function se(){if(!l.project_id){x.value="è¯·é€‰æ‹©é¡¹ç›®";return}if(!l.title.trim()){x.value="è¯·è¾“å…¥ä»»åŠ¡æ ‡é¢˜";return}I.value=!0,x.value="";try{const{UserService:o}=await re(async()=>{const{UserService:g}=await import("./index-Dhaj8LKV.js").then(E=>E.d);return{UserService:g}},__vite__mapDeps([0,1,2,3]));let e=125;const u=f.user?.email;if(u)try{const g=await o.getUserByEmail(u);g?.id&&(e=g.id)}catch(g){console.warn("é€šè¿‡é‚®ç®±æŸ¥è¯¢ç”¨æˆ·å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤ID 125:",g)}const s={project_id:parseInt(l.project_id),title:l.title.trim(),description:l.description?.trim()||"",priority:l.priority,status:"todo",assignee_id:e,reporter_id:e,due_date:l.due_date||null,estimated_hours:l.estimated_hours?parseFloat(l.estimated_hours):null},b=await H.createTask(s);m.value.unshift(b),D.value=!1,oe(),console.log("âœ… ä»»åŠ¡åˆ›å»ºæˆåŠŸ")}catch(o){console.error("åˆ›å»ºä»»åŠ¡å¤±è´¥:",o),o.message.includes("é¡¹ç›®ä¸å­˜åœ¨")?x.value="æŒ‡å®šçš„é¡¹ç›®ä¸å­˜åœ¨":o.message.includes("æƒé™ä¸è¶³")?x.value="æƒé™ä¸è¶³ï¼Œæ— æ³•åˆ›å»ºä»»åŠ¡":x.value=o.message||"åˆ›å»ºä»»åŠ¡å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–æ•°æ®åº“çŠ¶æ€"}finally{I.value=!1}}function oe(){l.project_id="",l.title="",l.description="",l.priority="medium",l.due_date="",l.estimated_hours=""}async function le(){V.value=!0;try{if(console.log("ğŸš€ å¼€å§‹åŠ è½½é¡¹ç›®æ•°æ®..."),!f.user?.id){console.warn("ç”¨æˆ·æœªç™»å½•ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆ"),await P();return}const o=await O();if(!o||!o.id){console.warn("ç”¨æˆ·è®°å½•è·å–å¤±è´¥ï¼Œä½¿ç”¨é™çº§æ–¹æ¡ˆåŠ è½½é¡¹ç›®"),await P();return}console.log("âœ… ç”¨æˆ·è®°å½•è·å–æˆåŠŸ:",o.id);try{console.log("ğŸ” å°è¯•ç›´æ¥åŠ è½½æ‰€æœ‰é¡¹ç›®...");const{data:e,error:u}=await S.from("projects").select("*").order("created_at",{ascending:!1});u?(console.warn("ç›´æ¥åŠ è½½é¡¹ç›®å¤±è´¥ï¼Œå°è¯•ç»„ç»‡å…³è”æ–¹å¼:",u.message),await A(o.id)):(a.value=e||[],console.log(`âœ… ç›´æ¥åŠ è½½é¡¹ç›®æˆåŠŸ: ${a.value.length} ä¸ªé¡¹ç›®`))}catch(e){console.warn("ç›´æ¥åŠ è½½é¡¹ç›®å¼‚å¸¸ï¼Œå°è¯•ç»„ç»‡å…³è”æ–¹å¼:",e),await A(o.id)}if(a.value.length===0){console.log("é¡¹ç›®ä¸ºç©ºï¼Œå°è¯•é™çº§æ–¹æ¡ˆ..."),await P();return}a.value.length>0&&await ae(),console.log(`ğŸ‰ é¡¹ç›®æ•°æ®åŠ è½½å®Œæˆ: ${a.value.length} ä¸ªé¡¹ç›®`)}catch(o){console.error("åŠ è½½é¡¹ç›®æ•°æ®å¤±è´¥:",o),await P()}finally{V.value=!1}}async function A(o){try{if(console.log("ğŸ” é€šè¿‡ç»„ç»‡å…³è”åŠ è½½é¡¹ç›®..."),await C.fetchOrganizations(o),console.log(`ğŸ“Š ç”¨æˆ·ç»„ç»‡æ•°é‡: ${C.organizations.length}`),a.value=[],C.organizations.length>0)for(const e of C.organizations)try{await T.fetchProjects(e.id),a.value.push(...T.projects),console.log(`âœ… åŠ è½½ç»„ç»‡ ${e.id} çš„é¡¹ç›®: ${T.projects.length} ä¸ª`)}catch(u){console.warn(`åŠ è½½ç»„ç»‡ ${e.id} çš„é¡¹ç›®å¤±è´¥:`,u)}}catch(e){throw console.error("é€šè¿‡ç»„ç»‡å…³è”åŠ è½½é¡¹ç›®å¤±è´¥:",e),e}}async function P(){try{console.log("ğŸ”§ ä½¿ç”¨é™çº§æ–¹æ¡ˆåŠ è½½é¡¹ç›®...");const{data:o,error:e}=await S.from("projects").select("*").order("created_at",{ascending:!1});e?(console.error("é™çº§æ–¹æ¡ˆåŠ è½½é¡¹ç›®å¤±è´¥:",e),e.message?.includes("does not exist")?(console.log("é¡¹ç›®è¡¨ä¸å­˜åœ¨ï¼Œä½¿ç”¨ç¤ºä¾‹æ•°æ®"),a.value=[{id:1,name:"ç¤ºä¾‹é¡¹ç›®",description:"è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®ï¼Œç”¨äºæ¼”ç¤ºå¹³å°åŠŸèƒ½",status:"active",priority:"medium",progress_percentage:75,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]):a.value=[]):a.value=o||[],a.value.length>0&&await F(),console.log(`ğŸ”§ é™çº§æ–¹æ¡ˆåŠ è½½å®Œæˆ: ${a.value.length} ä¸ªé¡¹ç›®`)}catch(o){console.error("é™çº§æ–¹æ¡ˆä¹Ÿå¤±è´¥äº†:",o),a.value=[],m.value=[]}}async function ae(){try{m.value=[];for(const o of a.value){const e=await H.getTasksByProject(o.id);m.value.push(...e)}}catch(o){console.error("åŠ è½½ä»»åŠ¡æ•°æ®å¤±è´¥:",o),await F()}}async function F(){try{console.log("ğŸ”§ ä½¿ç”¨é™çº§æ–¹æ¡ˆåŠ è½½ä»»åŠ¡...");const{data:o,error:e}=await S.from("tasks").select("*").order("created_at",{ascending:!1}).limit(10);e?(console.error("é™çº§æ–¹æ¡ˆåŠ è½½ä»»åŠ¡å¤±è´¥:",e),e.message?.includes("does not exist")?(console.log("ä»»åŠ¡è¡¨ä¸å­˜åœ¨ï¼Œä½¿ç”¨ç¤ºä¾‹æ•°æ®"),m.value=[{id:1,title:"é¡¹ç›®åˆå§‹åŒ–",description:"å®Œæˆé¡¹ç›®åŸºç¡€è®¾ç½®å’Œé…ç½®",status:"done",project_id:1,created_at:new Date().toISOString()},{id:2,title:"ç”¨æˆ·ç•Œé¢è®¾è®¡",description:"è®¾è®¡é¡¹ç›®çš„ä¸»è¦ç”¨æˆ·ç•Œé¢",status:"in_progress",project_id:1,created_at:new Date().toISOString()}]):m.value=[]):m.value=o||[],console.log(`ğŸ”§ é™çº§æ–¹æ¡ˆåŠ è½½ä»»åŠ¡å®Œæˆ: ${m.value.length} ä¸ªä»»åŠ¡`)}catch(o){console.error("é™çº§æ–¹æ¡ˆåŠ è½½ä»»åŠ¡ä¹Ÿå¤±è´¥äº†:",o),m.value=[]}}return ie(async()=>{await le()}),(o,e)=>{const u=ce("RouterLink");return n(),r("div",we,[t("nav",he,[t("div",_e,[t("div",ke,[t("div",je,[de(u,{to:"/",class:"text-gray-600 hover:text-gray-900"},{default:ue(()=>[...e[14]||(e[14]=[ge(" â† è¿”å›å·¥ä½œå° ",-1)])]),_:1}),e[15]||(e[15]=t("h1",{class:"text-xl font-semibold text-gray-900"},"é¡¹ç›®ç®¡ç†",-1))]),t("div",Ce,[t("button",{onClick:e[0]||(e[0]=s=>z.value=!0),class:"btn btn-primary"}," åˆ›å»ºæ–°é¡¹ç›® "),t("button",{onClick:J,class:"btn btn-outline text-sm"}," é€€å‡ºç™»å½• ")])])])]),t("main",ze,[t("div",Me,[e[19]||(e[19]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-4"},"é¡¹ç›®æ¦‚è§ˆ",-1)),t("div",Se,[t("div",Te,[t("div",Ue,i(a.value.length),1),e[16]||(e[16]=t("div",{class:"text-sm text-gray-600"},"æ€»é¡¹ç›®æ•°",-1))]),t("div",De,[t("div",Ie,i(a.value.filter(s=>s.status==="active").length),1),e[17]||(e[17]=t("div",{class:"text-sm text-gray-600"},"è¿›è¡Œä¸­",-1))]),t("div",Pe,[t("div",Ee,i(m.value.filter(s=>s.status==="todo"||s.status==="in_progress").length),1),e[18]||(e[18]=t("div",{class:"text-sm text-gray-600"},"å¾…åŠä»»åŠ¡",-1))])])]),t("div",Ve,[t("div",$e,[e[20]||(e[20]=t("h2",{class:"text-xl font-semibold text-gray-900"},"é¡¹ç›®åˆ—è¡¨",-1)),t("div",Be," å…± "+i(a.value.length)+" ä¸ªé¡¹ç›® ",1)]),V.value?(n(),r("div",Le,[...e[21]||(e[21]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),t("p",{class:"mt-2 text-sm text-gray-600"},"åŠ è½½ä¸­...",-1)])])):a.value.length===0?(n(),r("div",Oe,[e[22]||(e[22]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e[23]||(e[23]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"æš‚æ— é¡¹ç›®",-1)),e[24]||(e[24]=t("p",{class:"mt-1 text-sm text-gray-500"},"åˆ›å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªé¡¹ç›®å¼€å§‹ç®¡ç†ä»»åŠ¡",-1)),t("div",Re,[t("button",{onClick:e[1]||(e[1]=s=>z.value=!0),class:"btn btn-primary"}," åˆ›å»ºé¡¹ç›® ")])])):(n(),r("div",Ae,[(n(!0),r(k,null,j(a.value,s=>(n(),r("div",{key:s.id,class:"card p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:b=>o.$router.push(`/projects/${s.id}`)},[t("div",Ne,[t("h3",qe,i(s.name),1),t("span",{class:G(["px-2 py-1 rounded-full text-xs font-medium",s.status==="active"?"bg-green-100 text-green-800":s.status==="completed"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"])},i(s.status==="active"?"è¿›è¡Œä¸­":s.status==="completed"?"å·²å®Œæˆ":"è§„åˆ’ä¸­"),3)]),t("p",Ge,i(s.description||"æš‚æ— æè¿°"),1),t("div",He,[t("span",null,"è¿›åº¦: "+i(s.progress_percentage||0)+"%",1),t("span",null,i(new Date(s.created_at).toLocaleDateString("zh-CN")),1)])],8,Fe))),128))]))]),t("div",Ke,[t("div",{class:"flex justify-between items-center mb-4"},[e[25]||(e[25]=t("h2",{class:"text-xl font-semibold text-gray-900"},"æœ€è¿‘ä»»åŠ¡",-1)),t("button",{onClick:te,class:"btn btn-outline text-sm"}," åˆ›å»ºä»»åŠ¡ ")]),m.value.length===0?(n(),r("div",We,[...e[26]||(e[26]=[t("p",null,"æš‚æ— ä»»åŠ¡æ•°æ®",-1)])])):(n(),r("div",Je,[(n(!0),r(k,null,j(m.value.slice(0,5),s=>(n(),r("div",{key:s.id,class:"card p-4 hover:shadow-md transition-shadow"},[t("div",Qe,[t("h4",Xe,i(s.title),1),t("span",{class:G(["px-2 py-1 rounded-full text-xs font-medium",s.status==="completed"?"bg-green-100 text-green-800":s.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"])},i(s.status==="completed"?"å·²å®Œæˆ":s.status==="in_progress"?"è¿›è¡Œä¸­":"å¾…åŠ"),3)]),t("div",Ye,[t("span",null,"è´Ÿè´£äºº: "+i(s.assignee?.display_name||"æœªåˆ†é…"),1),s.due_date?(n(),r("span",Ze,i(new Date(s.due_date).toLocaleDateString("zh-CN")),1)):_("",!0)])]))),128))]))]),t("div",et,[e[27]||(e[27]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"AIå»ºè®®",-1)),t("div",tt,[(n(!0),r(k,null,j(W.value,s=>(n(),r("div",{key:s.text,class:"p-3 bg-blue-50 rounded-lg"},[t("p",st,i(s.text),1)]))),128))])])]),z.value?(n(),r("div",ot,[t("div",lt,[e[32]||(e[32]=t("h3",{class:"text-lg font-semibold mb-4"},"åˆ›å»ºæ–°é¡¹ç›®",-1)),t("form",{onSubmit:q(Q,["prevent"])},[t("div",at,[t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"é¡¹ç›®åç§°",-1)),p(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>d.name=s),type:"text",required:"",class:"input",placeholder:"è¯·è¾“å…¥é¡¹ç›®åç§°"},null,512),[[y,d.name]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"é¡¹ç›®æè¿°",-1)),p(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>d.description=s),class:"input resize-none",rows:"3",placeholder:"è¯·è¾“å…¥é¡¹ç›®æè¿°ï¼ˆå¯é€‰ï¼‰"},null,512),[[y,d.description]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"æ‰€å±ç»„ç»‡",-1)),p(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>d.organization_id=s),required:"",class:"input"},[e[30]||(e[30]=t("option",{value:""},"è¯·é€‰æ‹©ç»„ç»‡",-1)),(n(!0),r(k,null,j(me(C).organizations,s=>(n(),r("option",{key:s.id,value:s.id},i(s.name),9,rt))),128))],512),[[L,d.organization_id]])])]),v.value?(n(),r("div",nt,i(v.value),1)):_("",!0),t("div",it,[t("button",{type:"button",onClick:e[5]||(e[5]=s=>z.value=!1),class:"btn btn-secondary"}," å–æ¶ˆ "),t("button",{type:"submit",disabled:U.value,class:"btn btn-primary"},i(U.value?"åˆ›å»ºä¸­...":"åˆ›å»º"),9,dt)])],32)])])):_("",!0),D.value?(n(),r("div",ut,[t("div",ct,[e[41]||(e[41]=t("h3",{class:"text-lg font-semibold mb-4"},"åˆ›å»ºæ–°ä»»åŠ¡",-1)),t("form",{onSubmit:q(se,["prevent"])},[t("div",mt,[t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"é€‰æ‹©é¡¹ç›®",-1)),p(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>l.project_id=s),required:"",class:"input"},[e[33]||(e[33]=t("option",{value:""},"è¯·é€‰æ‹©é¡¹ç›®",-1)),(n(!0),r(k,null,j(a.value,s=>(n(),r("option",{key:s.id,value:s.id},i(s.name),9,pt))),128))],512),[[L,l.project_id]])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ä»»åŠ¡æ ‡é¢˜",-1)),p(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>l.title=s),type:"text",required:"",class:"input",placeholder:"è¯·è¾“å…¥ä»»åŠ¡æ ‡é¢˜"},null,512),[[y,l.title]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ä»»åŠ¡æè¿°",-1)),p(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>l.description=s),class:"input resize-none",rows:"3",placeholder:"è¯·è¾“å…¥ä»»åŠ¡æè¿°ï¼ˆå¯é€‰ï¼‰"},null,512),[[y,l.description]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ä¼˜å…ˆçº§",-1)),p(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>l.priority=s),class:"input"},[...e[37]||(e[37]=[t("option",{value:"low"},"ä½",-1),t("option",{value:"medium"},"ä¸­",-1),t("option",{value:"high"},"é«˜",-1),t("option",{value:"urgent"},"ç´§æ€¥",-1)])],512),[[L,l.priority]])]),t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"æˆªæ­¢æ—¥æœŸ",-1)),p(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>l.due_date=s),type:"date",class:"input"},null,512),[[y,l.due_date]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"é¢„ä¼°å·¥æ—¶ï¼ˆå°æ—¶ï¼‰",-1)),p(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>l.estimated_hours=s),type:"number",min:"0",class:"input",placeholder:"è¯·è¾“å…¥é¢„ä¼°å·¥æ—¶"},null,512),[[y,l.estimated_hours]])])]),x.value?(n(),r("div",vt,i(x.value),1)):_("",!0),t("div",gt,[t("button",{type:"button",onClick:e[12]||(e[12]=s=>D.value=!1),class:"btn btn-secondary"}," å–æ¶ˆ "),t("button",{type:"submit",disabled:I.value,class:"btn btn-primary"},i(I.value?"åˆ›å»ºä¸­...":"åˆ›å»º"),9,xt)])],32)])])):_("",!0),t("div",{class:"fixed bottom-6 right-6 z-50"},[t("button",{onClick:Z,class:"w-14 h-14 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-200 flex items-center justify-center"},[...e[42]||(e[42]=[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)])])]),$.value?(n(),r("div",ft,[t("div",{class:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 rounded-t-lg flex justify-between items-center"},[e[44]||(e[44]=t("div",{class:"flex items-center"},[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})]),t("span",{class:"font-semibold"},"AIåŠ©æ‰‹")],-1)),t("button",{onClick:ee,class:"text-white hover:text-gray-200"},[...e[43]||(e[43]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",bt,[(n(!0),r(k,null,j(B.value,s=>(n(),r("div",{key:s.id,class:"mb-4"},[s.isUser?(n(),r("div",_t,[t("div",kt,[t("p",jt,i(s.text),1)]),e[46]||(e[46]=t("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1))])):(n(),r("div",yt,[e[45]||(e[45]=t("div",{class:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),t("div",wt,[t("p",ht,i(s.text),1)])]))]))),128))]),t("div",Ct,[t("div",zt,[p(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>w.value=s),onKeyup:pe(R,["enter"]),type:"text",placeholder:"è¾“å…¥æ‚¨çš„é—®é¢˜...",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,544),[[y,w.value]]),t("button",{onClick:R,disabled:!w.value.trim(),class:"px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed"}," å‘é€ ",8,Mt)])])])):_("",!0)])}}}),Et=ye(Tt,[["__scopeId","data-v-7ce6e1ab"]]);export{Et as default};
